<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>AR Graduation Character - Simple Version</title>
    
    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- AR.js -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #000;
        }
        
        #info {
            position: fixed;
            top: 10px;
            left: 10px;
            right: 10px;
            color: white;
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 10px;
            z-index: 999;
            font-size: 14px;
            text-align: center;
        }
        
        #instructions {
            position: fixed;
            bottom: 20px;
            left: 10px;
            right: 10px;
            color: white;
            background: rgba(33, 150, 243, 0.9);
            padding: 15px;
            border-radius: 10px;
            z-index: 999;
            font-size: 14px;
            text-align: center;
        }

        .status-found {
            background: rgba(76, 175, 80, 0.9) !important;
        }

        .status-lost {
            background: rgba(244, 67, 54, 0.9) !important;
        }
    </style>
</head>

<body>
    <div id="info">
        <div><strong>ðŸŽ“ AR Karakter Wisuda</strong></div>
        <div id="status">Memuat AR... Mohon tunggu</div>
    </div>

    <div id="instructions">
        <strong>ðŸ“‹ Instruksi:</strong><br>
        1. Izinkan akses kamera<br>
        2. Cari dan download "Hiro Marker" di Google<br>
        3. Print marker atau tampilkan di layar lain<br>
        4. Arahkan kamera ke marker Hiro
    </div>

    <!-- A-Frame AR Scene -->
    <a-scene
        embedded
        arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono; patternRatio: 0.8; trackingMethod: best;"
        vr-mode-ui="enabled: false;"
        renderer="logarithmicDepthBuffer: true; colorManagement: true; sortObjects: true;"
        device-orientation-permission-ui="enabled: false">

        <!-- Assets -->
        <a-assets>
            <!-- No external assets needed -->
        </a-assets>

        <!-- Camera -->
        <a-entity camera></a-entity>

        <!-- Hiro Marker -->
        <a-marker preset="hiro" id="markerHiro">
            
            <!-- Graduation Character -->
            <a-entity id="graduationChar" position="0 0.5 0" scale="0.8 0.8 0.8">
                
                <!-- Body (Graduation Gown) - Dark Blue -->
                <a-cylinder 
                    position="0 0 0" 
                    radius-top="0.15" 
                    radius-bottom="0.25" 
                    height="0.6" 
                    color="#1a237e"
                    material="roughness: 0.7; metalness: 0.1">
                </a-cylinder>

                <!-- White Collar/Stole -->
                <a-ring 
                    position="0 0.25 0" 
                    radius-inner="0.12" 
                    radius-outer="0.18" 
                    color="white"
                    rotation="-90 0 0">
                </a-ring>

                <!-- Head - Skin Color -->
                <a-sphere 
                    position="0 0.45 0" 
                    radius="0.12" 
                    color="#ffdbac"
                    material="roughness: 0.8">
                </a-sphere>

                <!-- Eyes -->
                <a-sphere position="-0.04 0.48 0.1" radius="0.015" color="#000"></a-sphere>
                <a-sphere position="0.04 0.48 0.1" radius="0.015" color="#000"></a-sphere>

                <!-- Nose -->
                <a-sphere position="0 0.45 0.11" radius="0.008" color="#e6a378"></a-sphere>

                <!-- Mouth - Smile -->
                <a-cylinder 
                    position="0 0.42 0.1" 
                    radius="0.02" 
                    height="0.005" 
                    color="#ff5722"
                    rotation="0 0 90">
                </a-cylinder>

                <!-- Hair - Dark Brown -->
                <a-sphere 
                    position="0 0.52 -0.02" 
                    radius="0.13" 
                    color="#3e2723"
                    scale="1 0.8 0.9">
                </a-sphere>

                <!-- Graduation Cap Base -->
                <a-cylinder 
                    position="0 0.58 0" 
                    radius="0.13" 
                    height="0.03" 
                    color="#000"
                    material="roughness: 0.9">
                </a-cylinder>

                <!-- Graduation Cap Board (Square Top) -->
                <a-box 
                    position="0 0.61 0" 
                    width="0.3" 
                    height="0.02" 
                    depth="0.3" 
                    color="#000"
                    material="roughness: 0.9">
                </a-box>

                <!-- Tassel -->
                <a-cylinder 
                    position="0.12 0.6 0.12" 
                    radius="0.003" 
                    height="0.06" 
                    color="#ffc107">
                </a-cylinder>
                <a-sphere 
                    position="0.12 0.57 0.12" 
                    radius="0.012" 
                    color="#ffc107">
                </a-sphere>

                <!-- Left Arm -->
                <a-cylinder 
                    position="-0.18 0.1 0" 
                    radius="0.035" 
                    height="0.3" 
                    color="#1a237e"
                    rotation="0 0 25">
                </a-cylinder>

                <!-- Right Arm -->
                <a-cylinder 
                    position="0.18 0.1 0" 
                    radius="0.035" 
                    height="0.3" 
                    color="#1a237e"
                    rotation="0 0 -25">
                </a-cylinder>

                <!-- Left Hand -->
                <a-sphere 
                    position="-0.22 -0.05 0" 
                    radius="0.04" 
                    color="#ffdbac">
                </a-sphere>

                <!-- Right Hand with Diploma -->
                <a-sphere 
                    position="0.22 -0.05 0" 
                    radius="0.04" 
                    color="#ffdbac">
                </a-sphere>

                <!-- Diploma Certificate -->
                <a-box 
                    position="0.25 -0.05 0.05" 
                    width="0.12" 
                    height="0.08" 
                    depth="0.003" 
                    color="#d32f2f"
                    material="roughness: 0.6">
                </a-box>

                <!-- Legs -->
                <a-cylinder 
                    position="-0.08 -0.35 0" 
                    radius="0.04" 
                    height="0.3" 
                    color="#1976d2">
                </a-cylinder>
                <a-cylinder 
                    position="0.08 -0.35 0" 
                    radius="0.04" 
                    height="0.3" 
                    color="#1976d2">
                </a-cylinder>

                <!-- Shoes -->
                <a-box 
                    position="-0.08 -0.52 0.03" 
                    width="0.08" 
                    height="0.04" 
                    depth="0.12" 
                    color="#000">
                </a-box>
                <a-box 
                    position="0.08 -0.52 0.03" 
                    width="0.08" 
                    height="0.04" 
                    depth="0.12" 
                    color="#000">
                </a-box>

                <!-- Animations -->
                <a-animation
                    attribute="rotation"
                    to="0 360 0"
                    dur="10000"
                    repeat="indefinite">
                </a-animation>

                <a-animation
                    attribute="position"
                    to="0 0.6 0"
                    dur="3000"
                    direction="alternate"
                    repeat="indefinite">
                </a-animation>

            </a-entity>

            <!-- Congratulations Text -->
            <a-text 
                value="SELAMAT WISUDA!"
                position="0 1.2 0"
                align="center"
                color="#ffc107"
                scale="0.5 0.5 0.5"
                animation="property: rotation; to: 0 360 0; dur: 8000; loop: true">
            </a-text>

            <!-- Floating Stars Effect -->
            <a-sphere position="-0.5 1 0.5" radius="0.02" color="#ffeb3b"
                animation="property: position; to: -0.5 1.5 0.5; dur: 2000; dir: alternate; loop: true"></a-sphere>
            <a-sphere position="0.5 1 0.5" radius="0.02" color="#ffeb3b"
                animation="property: position; to: 0.5 1.5 0.5; dur: 2500; dir: alternate; loop: true"></a-sphere>
            <a-sphere position="0 1 -0.5" radius="0.02" color="#ffeb3b"
                animation="property: position; to: 0 1.5 -0.5; dur: 3000; dir: alternate; loop: true"></a-sphere>

        </a-marker>

    </a-scene>

    <script>
        // Wait for A-Frame to initialize
        document.addEventListener('DOMContentLoaded', function() {
            const scene = document.querySelector('a-scene');
            const marker = document.querySelector('#markerHiro');
            const status = document.getElementById('status');
            const info = document.getElementById('info');

            // Scene loaded
            scene.addEventListener('loaded', function() {
                console.log('A-Frame scene loaded');
                status.textContent = 'AR siap! Cari marker Hiro...';
            });

            // Marker found
            marker.addEventListener('markerFound', function() {
                console.log('Marker Hiro ditemukan!');
                status.textContent = 'ðŸŽ‰ Marker ditemukan! Selamat wisuda!';
                info.className = 'status-found';
                
                // Play celebration sound (optional)
                try {
                    const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEaBkPE7OEAAA==');
                    audio.play().catch(() => {/* Ignore audio errors */});
                } catch(e) {
                    // Ignore audio errors
                }
            });

            // Marker lost
            marker.addEventListener('markerLost', function() {
                console.log('Marker Hiro hilang');
                status.textContent = 'Marker hilang. Cari lagi marker Hiro...';
                info.className = 'status-lost';
            });

            // Camera error handling
            scene.addEventListener('camera-error', function(error) {
                console.error('Camera error:', error);
                status.textContent = 'Error kamera. Refresh halaman.';
                info.className = 'status-lost';
            });

            // AR.js initialization
            scene.addEventListener('arjs-video-loaded', function() {
                console.log('Kamera berhasil dimuat');
                status.textContent = 'Kamera aktif! Cari marker Hiro...';
            });

            console.log('AR Graduation Character initialized');
        });

        // Handle visibility change
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                console.log('Page hidden');
            } else {
                console.log('Page visible');
            }
        });
    </script>

</body>
</html>
